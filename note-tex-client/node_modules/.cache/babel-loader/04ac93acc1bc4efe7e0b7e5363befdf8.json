{"ast":null,"code":"import _slicedToArray from\"/home/andrew/School/Spring_2020/WebSystems/NoteTex/note-tex-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useDispatch}from'react-redux';import{startEdit,beginEndEdit,addNewLine,removeLine}from'./LineActions';import'./css/noteLine.css';import MathJax from'react-mathjax';export function NoteLine(props){var noteLine=props.noteLine;var dispatch=useDispatch();var _useState=useState(noteLine.lineContents),_useState2=_slicedToArray(_useState,2),lineContents=_useState2[0],setLineContents=_useState2[1];var lineCount=props.lineCount;var onStartEdit=function onStartEdit(){dispatch(startEdit(noteLine.lineNumber));};var onEndEdit=function onEndEdit(typeOfExit){dispatch(beginEndEdit({lineNumber:noteLine.lineNumber,lineContents:lineContents},props.noteLines,lineCount,props.noteSheet_id,props.userName));if(lineContents!==\"\"&&typeOfExit===\"ENTER\"){dispatch(addNewLine(noteLine.lineNumber));}};var onRemoveLine=function onRemoveLine(){if(lineCount>1){dispatch(removeLine(noteLine));}if(noteLine.lineNumber>1){dispatch(startEdit(noteLine.lineNumber-1));}};var onUpArrow=function onUpArrow(){if(noteLine.lineNumber!==1){dispatch(beginEndEdit({lineNumber:noteLine.lineNumber,lineContents:lineContents}));dispatch(startEdit(noteLine.lineNumber-1));}};var onDownArrow=function onDownArrow(){if(noteLine.lineNumber!==lineCount){dispatch(beginEndEdit({lineNumber:noteLine.lineNumber,lineContents:lineContents}));dispatch(startEdit(noteLine.lineNumber+1));}};var processesKeyPress=function processesKeyPress(keyCode){if(keyCode===13){onEndEdit(\"ENTER\");}else if(keyCode===38){onUpArrow();}else if(keyCode===40){onDownArrow();}else if(keyCode===8&&(lineContents===\"\"||lineContents==null)){onRemoveLine();}};var input='This **textbolded** a header';if(noteLine.isEditing){return/*#__PURE__*/React.createElement(\"span\",{className:\"lineArea\"},/*#__PURE__*/React.createElement(\"input\",{className:\"inputBox\",value:lineContents,onBlur:function onBlur(){return onEndEdit(\"CURSER\");},onKeyDown:function onKeyDown(event){return processesKeyPress(event.keyCode);},onChange:function onChange(e){setLineContents(e.target.value);},ref:function ref(input){return input&&input.focus();}}));}else{return/*#__PURE__*/React.createElement(\"span\",{className:\"lineArea\"},parseLine(noteLine.lineContents));}function parseLine(lineContents){var parsedLineContents=lineContents;var fontSizeArray=[12,24,20,16];var headerLevel=0;if(parsedLineContents[0]==='#'){headerLevel=1;parsedLineContents=parsedLineContents.substr(1);}if(parsedLineContents[0]==='#'){headerLevel=2;parsedLineContents=parsedLineContents.substr(1);}if(parsedLineContents[0]==='#'){headerLevel=3;parsedLineContents=parsedLineContents.substr(1);}var finalStructure;var lineOutput;try{var _markdownParser=markdownParser(parsedLineContents,null);var _markdownParser2=_slicedToArray(_markdownParser,1);finalStructure=_markdownParser2[0];lineOutput=/*#__PURE__*/React.createElement(\"span\",{onClick:onStartEdit,style:{fontSize:fontSizeArray[headerLevel]},className:\"noteText\"},\" \",finalStructure,\" \");}catch(err){lineOutput=/*#__PURE__*/React.createElement(\"span\",{onClick:onStartEdit,style:{fontSize:fontSizeArray[headerLevel]},className:\"noteText\"},\" \",parsedLineContents,\" \");}return lineOutput;}function markdownParser(lineContents,endSymbol){var text=lineContents;var stack=[];var finalStructure;while(text.length>0&&text[0]!==endSymbol){stack.push(text[0]);text=text.substr(1);if(endSymbol!=='$'&&(stack[stack.length-1]==='%'||stack[stack.length-1]==='`'||stack[stack.length-1]==='$')){var recursiveStructure;var _markdownParser3=markdownParser(text,stack[stack.length-1]);var _markdownParser4=_slicedToArray(_markdownParser3,2);recursiveStructure=_markdownParser4[0];text=_markdownParser4[1];stack.pop(stack.length-1);finalStructure=/*#__PURE__*/React.createElement(\"span\",null,finalStructure,/*#__PURE__*/React.createElement(\"span\",null,stack),/*#__PURE__*/React.createElement(\"span\",null,recursiveStructure));stack=[];text=text.substr(1);}}finalStructure=/*#__PURE__*/React.createElement(\"span\",null,finalStructure,/*#__PURE__*/React.createElement(\"span\",null,stack));if(text==null||text.length===0){return[/*#__PURE__*/React.createElement(\"span\",null,finalStructure),null];}else{if(endSymbol==='%'){return[/*#__PURE__*/React.createElement(\"b\",null,finalStructure),text];}if(endSymbol==='`'){return[/*#__PURE__*/React.createElement(\"i\",null,finalStructure),text];}if(endSymbol==='$'){var latexScript=stack.join('');return[/*#__PURE__*/React.createElement(MathJax.Provider,null,/*#__PURE__*/React.createElement(MathJax.Node,{inline:true,formula:latexScript})),text];}}return['',''];}}","map":{"version":3,"sources":["/home/andrew/School/Spring_2020/WebSystems/NoteTex/note-tex-client/src/NoteLine.js"],"names":["React","useState","useDispatch","startEdit","beginEndEdit","addNewLine","removeLine","MathJax","NoteLine","props","noteLine","dispatch","lineContents","setLineContents","lineCount","onStartEdit","lineNumber","onEndEdit","typeOfExit","noteLines","noteSheet_id","userName","onRemoveLine","onUpArrow","onDownArrow","processesKeyPress","keyCode","input","isEditing","event","e","target","value","focus","parseLine","parsedLineContents","fontSizeArray","headerLevel","substr","finalStructure","lineOutput","markdownParser","fontSize","err","endSymbol","text","stack","length","push","recursiveStructure","pop","latexScript","join"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {useDispatch} from 'react-redux';\nimport {startEdit, beginEndEdit, addNewLine, removeLine} from './LineActions'\nimport './css/noteLine.css';\nimport MathJax from 'react-mathjax';\n\nexport function NoteLine(props){\n  const noteLine = props.noteLine;\n  const dispatch = useDispatch();\n  const [lineContents, setLineContents] = useState(noteLine.lineContents);\n  const lineCount = props.lineCount\n\n  const onStartEdit = () =>{\n    dispatch(startEdit(noteLine.lineNumber));\n  }\n\n  const onEndEdit = (typeOfExit) =>{\n    dispatch(beginEndEdit({lineNumber:noteLine.lineNumber, lineContents:lineContents},props.noteLines,lineCount,props.noteSheet_id,props.userName));\n    if(lineContents !== \"\" && typeOfExit === \"ENTER\"){\n      dispatch(addNewLine(noteLine.lineNumber));\n    }\n  }\n\n  const onRemoveLine = () =>{\n    if(lineCount > 1){\n      dispatch(removeLine(noteLine));\n    }\n    if(noteLine.lineNumber > 1){\n      dispatch(startEdit(noteLine.lineNumber - 1));\n    }\n  }\n\nconst onUpArrow = () => {\n  if(noteLine.lineNumber !== 1){\n    dispatch(beginEndEdit({lineNumber:noteLine.lineNumber, lineContents:lineContents}));\n    dispatch(startEdit(noteLine.lineNumber - 1));\n  }\n}\n\nconst onDownArrow = () => {\n  if(noteLine.lineNumber !== lineCount){\n    dispatch(beginEndEdit({lineNumber:noteLine.lineNumber, lineContents:lineContents}));\n    dispatch(startEdit(noteLine.lineNumber + 1));\n  }\n}\n\n\nconst processesKeyPress = (keyCode) =>{\n  if(keyCode === 13){\n    onEndEdit(\"ENTER\");\n  }\n  else if(keyCode === 38){\n    onUpArrow();\n  }\n  else if(keyCode === 40){\n    onDownArrow();\n  }\n  else if(keyCode === 8 && (lineContents === \"\" || lineContents == null)){\n      onRemoveLine();\n  }\n\n}\n  const input = 'This **textbolded** a header';\n  if(noteLine.isEditing){\n    return(\n      <span className=\"lineArea\">\n        <input className=\"inputBox\" value={lineContents} onBlur={() => onEndEdit(\"CURSER\")} onKeyDown={event => processesKeyPress(event.keyCode)} onChange={e => {setLineContents(e.target.value)}} ref={input => input && input.focus()}/>\n      </span>\n    )\n  }else{\n    return(\n      <span className=\"lineArea\">\n        {parseLine(noteLine.lineContents)}\n      </span>\n    )\n  }\n\n  function parseLine(lineContents){\n    var parsedLineContents = lineContents;\n\n    var fontSizeArray = [12,24,20,16]\n    var headerLevel = 0;\n    if(parsedLineContents[0] === '#'){\n      headerLevel = 1;\n      parsedLineContents = parsedLineContents.substr(1);\n    }\n    if(parsedLineContents[0] === '#'){\n      headerLevel = 2;\n      parsedLineContents = parsedLineContents.substr(1);\n    }\n    if(parsedLineContents[0] === '#'){\n      headerLevel = 3;\n      parsedLineContents = parsedLineContents.substr(1);\n    }\n\n\n    var finalStructure;\n    var lineOutput;\n    try{\n      [finalStructure,] = markdownParser(parsedLineContents,null);\n       lineOutput = <span onClick={onStartEdit} style={{fontSize:fontSizeArray[headerLevel]}} className =\"noteText\"> {finalStructure} </span>\n    }catch(err){\n      lineOutput = <span onClick={onStartEdit} style={{fontSize:fontSizeArray[headerLevel]}} className =\"noteText\"> {parsedLineContents} </span>\n\n    }\n\n\n    return lineOutput;\n  }\n\n  function markdownParser(lineContents, endSymbol){\n\n    var text = lineContents;\n    var stack = [];\n    var finalStructure;\n    while(text.length > 0 && text[0] !== endSymbol){\n      stack.push(text[0]);\n      text  = text.substr(1);\n      if(endSymbol !== '$' && (stack[stack.length - 1] === '%' || stack[stack.length - 1] === '`' || stack[stack.length - 1] === '$')){\n\n        var recursiveStructure;\n        [recursiveStructure, text] = markdownParser(text,stack[stack.length - 1]);\n\n        stack.pop(stack.length - 1)\n        finalStructure = <span>{finalStructure}<span>{stack}</span><span>{recursiveStructure}</span></span>;\n        stack = [];\n        text  = text.substr(1);\n      }\n    }\n\n    finalStructure = <span>{finalStructure}<span>{stack}</span></span>;\n\n\n    if(text == null || text.length === 0){\n      return [<span>{finalStructure}</span>,null];\n    }else{\n\n      if(endSymbol === '%'){\n        return [<b>{finalStructure}</b>,text];\n\n      }\n      if(endSymbol === '`'){\n        return [<i>{finalStructure}</i>,text];\n\n      }\n      if(endSymbol === '$'){\n\n        var latexScript =stack.join('');\n        return [<MathJax.Provider><MathJax.Node inline formula={latexScript} /></MathJax.Provider>,text];\n\n      }\n    }\n\n\n    return ['','']\n}\n\n}\n"]},"metadata":{},"sourceType":"module"}