{"ast":null,"code":"import React, { useState } from 'react';\nexport const UserAction = Object.freeze({\n  BeginLogin: 'BeginLogin',\n  FinishLogin: 'FinishLogin',\n  BeginLogout: 'BeginLogout',\n  BeginNewUser: 'BeginNewUser',\n  BeginLoadSheet: 'BeginLoadSheet',\n  FinishLoadSheet: 'FinishLoadSheet',\n  BeginNewNoteSheet: 'BeginNewNoteSheet'\n});\nconst host = 'http://websystems.senapatiratne.com:1443';\n\nfunction checkForErrors(responce) {\n  alert(\"hereerer\");\n\n  if (!responce.ok) {\n    throw Error(`${responce.status}:${responce.statusText}`);\n  }\n\n  return responce;\n}\n\nexport function beginLogin(userName) {\n  return dispatch => {\n    fetch(`${host}/noteSheetList/${userName}`).then(checkForErrors).then(responce => responce.json()).then(data => {\n      if (data.ok) {\n        dispatch(finishLogin(data.usersNoteSheets, userName));\n      } else {\n        alert(\"Login Failed\");\n      }\n    }).catch(e => console.error(e));\n  };\n}\nexport function finishLogin(usersNoteSheets, userName) {\n  return {\n    type: UserAction.FinishLogin,\n    payload: {\n      noteSheetList: usersNoteSheets,\n      userName: userName\n    }\n  };\n}\nexport function beginNewNoteSheet() {\n  return {\n    type: UserAction.BeginNewNoteSheet,\n    payload: 1\n  };\n}\nexport function beginNewUser(userName) {\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: {\n      \"userName\": userName\n    }\n  };\n  return dispatch => {\n    fetch(`${host}/users`, options).then(checkForErrors).then(responce => responce.json()).then(data => {\n      if (data.ok) {\n        beginLogin(userName);\n        beginNewNoteSheet();\n      }\n    }).catch(e => console.error(e));\n  };\n}\nexport function beginLoadSheet(userName, noteSheet) {\n  const options = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  alert(\"here1: \" + `${host}/noteSheetFind/${userName}/${noteSheet.noteSheetName}` + \".\");\n  return dispatch => {\n    fetch(`http://websystems.senapatiratne.com:1443/noteSheetFind/zach/TestNameDinner`, options).then(checkForErrors).then(responce => responce.json()).then(data => {\n      alert(\"hererererererer\");\n\n      if (data.ok) {\n        dispatch(finishLoadSheet(data.usersNoteSheets));\n      }\n    }).catch(e => console.error(e));\n  };\n}\nexport function finishLoadSheet(noteSheet) {\n  return {\n    type: UserAction.FinishLoadSheet,\n    payload: noteSheet\n  };\n}","map":{"version":3,"sources":["/home/andrew/School/Spring_2020/WebSystems/NoteTex/note-tex-client/src/UserActions.js"],"names":["React","useState","UserAction","Object","freeze","BeginLogin","FinishLogin","BeginLogout","BeginNewUser","BeginLoadSheet","FinishLoadSheet","BeginNewNoteSheet","host","checkForErrors","responce","alert","ok","Error","status","statusText","beginLogin","userName","dispatch","fetch","then","json","data","finishLogin","usersNoteSheets","catch","e","console","error","type","payload","noteSheetList","beginNewNoteSheet","beginNewUser","options","method","headers","body","beginLoadSheet","noteSheet","noteSheetName","finishLoadSheet"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nexport const UserAction = Object.freeze({\n  BeginLogin: 'BeginLogin',\n  FinishLogin: 'FinishLogin',\n  BeginLogout: 'BeginLogout',\n  BeginNewUser: 'BeginNewUser',\n  BeginLoadSheet:'BeginLoadSheet',\n  FinishLoadSheet:'FinishLoadSheet',\n  BeginNewNoteSheet:'BeginNewNoteSheet',\n})\n\nconst host = 'http://websystems.senapatiratne.com:1443';\n\nfunction checkForErrors(responce){\n  alert(\"hereerer\")\n  if(!responce.ok){\n    throw Error(`${responce.status}:${responce.statusText}`);\n  }\n  return responce;\n}\n\nexport function beginLogin(userName){\n  return dispatch => {\n      fetch(`${host}/noteSheetList/${userName}`)\n        .then(checkForErrors)\n        .then(responce => responce.json())\n        .then(data => {\n          if(data.ok){\n            dispatch(finishLogin(data.usersNoteSheets,userName));\n          }\n          else{\n            alert(\"Login Failed\");\n          }\n        })\n        .catch(e => console.error(e));\n  };\n}\n\n\nexport function finishLogin(usersNoteSheets, userName){\n  return{\n    type: UserAction.FinishLogin,\n    payload: {noteSheetList:usersNoteSheets, userName:userName}\n  };\n}\n\nexport function beginNewNoteSheet(){\n  return{\n    type: UserAction.BeginNewNoteSheet,\n    payload:1\n  }\n}\n\nexport function beginNewUser(userName){\n  const options = {method: 'POST',headers:{'Content-Type': 'application/json',},body:{\"userName\":userName},}\n  return dispatch => {\n    fetch(`${host}/users`,options)\n      .then(checkForErrors)\n      .then(responce => responce.json())\n      .then(data => {\n        if(data.ok){\n          beginLogin(userName);\n          beginNewNoteSheet();\n        }\n      })\n      .catch(e => console.error(e));\n  };\n}\n\nexport function beginLoadSheet(userName, noteSheet){\n  const options = {method: 'GET',headers:{'Content-Type': 'application/json'}}\n  alert(\"here1: \" + `${host}/noteSheetFind/${userName}/${noteSheet.noteSheetName}` + \".\")\n  return dispatch => {\n      fetch(`http://websystems.senapatiratne.com:1443/noteSheetFind/zach/TestNameDinner`,options).then(checkForErrors).then(responce => responce.json()).then(data => {\n          alert(\"hererererererer\");\n          if(data.ok){\n\n            dispatch(finishLoadSheet(data.usersNoteSheets))\n          }\n        }).catch(e => console.error(e));\n  }\n}\n\nexport function finishLoadSheet(noteSheet){\n  return{\n    type:UserAction.FinishLoadSheet,\n    payload:noteSheet\n  }\n}\n"]},"metadata":{},"sourceType":"module"}