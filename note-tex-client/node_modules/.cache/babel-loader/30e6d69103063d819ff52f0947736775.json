{"ast":null,"code":"import { LineAction } from './LineActions';\nimport { UserAction } from './UserActions';\nconst initialState = {\n  lineCount: 0,\n  noteLines: [],\n  userName: \"\",\n  noteSheets: [],\n  noteSheet_id: 0,\n  lastUpdatedAt: \"\"\n};\n\nfunction noteLinesReducer(noteLinesArray, action) {\n  switch (action.type) {\n    case UserAction.FinishDelete:\n      return [];\n\n    case LineAction.StartEdit:\n      return noteLinesArray.map(line => {\n        if (line.lineNumber === action.payload) {\n          return { ...line,\n            isEditing: true\n          };\n        } else {\n          return line;\n        }\n      });\n\n    case LineAction.EndEdit:\n      return noteLinesArray.map(line => {\n        if (line.lineNumber === action.payload.lineNumber) {\n          return action.payload;\n        } else {\n          return line;\n        }\n      });\n\n    case UserAction.Logout:\n      return [];\n\n    case LineAction.LoadLine:\n      return [action.payload, ...noteLinesArray];\n\n    case LineAction.AddNewLine:\n      //console.log(\"Old: \"+ JSON.stringify(noteLinesArray))\n      const oldList = noteLinesArray.map(line => {\n        //console.log(\"a Line: \"+ JSON.stringify(line))\n        if (line.lineNumber <= action.payload) {\n          return {\n            lineContents: line.lineContents + \"\",\n            lineNumber: line.lineNumber,\n            marked: \"under\"\n          };\n        } else {\n          return {\n            lineContents: line.lineContents + \"\",\n            lineNumber: line.lineNumber + 1,\n            marked: \"Over\"\n          };\n        }\n      });\n      const temp = {\n        lineNumber: action.payload + 1,\n        lineContents: \"\",\n        isEditing: true,\n        marked: \"new\"\n      }; //console.log(\"New: \"+ JSON.stringify([...oldList, temp].sort((a,b) => {return a.lineNumber - b.lineNumber})))\n\n      return [...oldList, temp].sort((a, b) => {\n        return a.lineNumber - b.lineNumber;\n      });\n\n    case LineAction.RemoveLine:\n      const newList = noteLinesArray.filter(line => line.lineNumber != action.payload.lineNumber).map(line => {\n        //console.log(\"a Line: \"+ JSON.stringify(line))\n        if (line.lineNumber <= action.payload.lineNumber) {\n          return {\n            lineContents: line.lineContents + \"\",\n            lineNumber: line.lineNumber,\n            marked: \"under\"\n          };\n        } else {\n          return {\n            lineContents: line.lineContents + \"\",\n            lineNumber: line.lineNumber - 1,\n            marked: \"Over\"\n          };\n        }\n      }); //console.log(\"New: \"+ JSON.stringify([...oldList, temp].sort((a,b) => {return a.lineNumber - b.lineNumber})))\n\n      return newList.sort((a, b) => {\n        return a.lineNumber - b.lineNumber;\n      });\n\n    case UserAction.FinishLoadSheet:\n      return JSON.parse(action.payload.contents);\n    //.sort((a,b) => {return a.lineNumber - b.lineNumber});\n\n    default:\n      return noteLinesArray;\n  }\n}\n\nfunction lineCountReducer(lineCountVar, action) {\n  switch (action.type) {\n    case UserAction.FinishDelete:\n      return 0;\n\n    case LineAction.LoadLine:\n      return lineCountVar + 1;\n\n    case LineAction.AddNewLine:\n      return lineCountVar + 1;\n\n    case LineAction.RemoveLine:\n      return lineCountVar - 1;\n\n    case UserAction.FinishLoadSheet:\n      return action.payload.lineCount;\n\n    case UserAction.Logout:\n      return 0;\n\n    default:\n      return lineCountVar;\n  }\n}\n\nfunction userNameReducer(userNameVar, action) {\n  switch (action.type) {\n    case UserAction.FinishLogin:\n      return action.payload.userName;\n\n    case UserAction.Logout:\n      return \"\";\n\n    default:\n      return userNameVar;\n  }\n}\n\nfunction noteSheetsReducer(noteSheetsArray, action) {\n  switch (action.type) {\n    case UserAction.FinishNewNoteSheet:\n      return [...noteSheetsArray, action.payload];\n\n    case UserAction.FinishDelete:\n      return noteSheetsArray.filter(sheet => !sheet.isActive);\n\n    case UserAction.BeginNewNoteSheet:\n      return [...noteSheetsArray, {\n        noteSheetName: \"new sheet\"\n      }];\n\n    case UserAction.FinishLogin:\n      return action.payload.noteSheetList;\n\n    case UserAction.FinishLoadSheet:\n      return noteSheetsArray.map(sheet => {\n        if (sheet.noteSheetName === action.payload.noteSheetName) {\n          return { ...sheet,\n            isActive: true\n          };\n        } else {\n          return { ...sheet,\n            isActive: false\n          };\n        }\n      });\n\n    case UserAction.Logout:\n      return [];\n\n    default:\n      return noteSheetsArray;\n  }\n}\n\nfunction noteSheet_idReducer(oldId, action) {\n  switch (action.type) {\n    case UserAction.FinishLoadSheet:\n      return action.payload.noteSheet_id;\n\n    default:\n      return oldId;\n  }\n}\n\nfunction lastUpdatedAtReduced(oldTime, action) {\n  switch (action.type) {\n    case UserAction.finishLoadSheet:\n      return new Date(action.payload.updatedAt).toUTCString();\n      s;\n\n    default:\n      return oldTime;\n  }\n}\n\nfunction reducer(state = initialState, action) {\n  return {\n    lineCount: lineCountReducer(state.lineCount, action),\n    noteLines: noteLinesReducer(state.noteLines, action),\n    userName: userNameReducer(state.userName, action),\n    noteSheets: noteSheetsReducer(state.noteSheets, action),\n    noteSheet_id: noteSheet_idReducer(state.noteSheet_id, action),\n    lastUpdatedAt: lastUpdatedAtReduced(state.lastUpdatedAt, action)\n  };\n}\n\nexport default reducer;","map":{"version":3,"sources":["/home/andrew/School/Spring_2020/WebSystems/NoteTex/note-tex-client/src/LineReducer.js"],"names":["LineAction","UserAction","initialState","lineCount","noteLines","userName","noteSheets","noteSheet_id","lastUpdatedAt","noteLinesReducer","noteLinesArray","action","type","FinishDelete","StartEdit","map","line","lineNumber","payload","isEditing","EndEdit","Logout","LoadLine","AddNewLine","oldList","lineContents","marked","temp","sort","a","b","RemoveLine","newList","filter","FinishLoadSheet","JSON","parse","contents","lineCountReducer","lineCountVar","userNameReducer","userNameVar","FinishLogin","noteSheetsReducer","noteSheetsArray","FinishNewNoteSheet","sheet","isActive","BeginNewNoteSheet","noteSheetName","noteSheetList","noteSheet_idReducer","oldId","lastUpdatedAtReduced","oldTime","finishLoadSheet","Date","updatedAt","toUTCString","s","reducer","state"],"mappings":"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","sourcesContent":["import {LineAction} from './LineActions';\nimport {UserAction} from './UserActions'\nconst initialState = {\n  lineCount: 0,\n  noteLines: [],\n  userName:\"\",\n  noteSheets:[],\n  noteSheet_id:0,\n  lastUpdatedAt: \"\"\n}\n\nfunction noteLinesReducer(noteLinesArray, action){\n  switch (action.type) {\n\n\n    case UserAction.FinishDelete:\n      return [];\n\n\n    case LineAction.StartEdit:\n      return noteLinesArray.map(line =>{\n        if(line.lineNumber === action.payload){\n          return{...line, isEditing:true};\n        }\n        else{\n          return line;\n        }\n      });\n\n\n    case LineAction.EndEdit:\n      return noteLinesArray.map(line =>{\n           if(line.lineNumber === action.payload.lineNumber){\n             return action.payload;\n           }\n           else{\n             return line;\n           }\n         });\n\n     case UserAction.Logout:\n      return [];\n\n\n\n    case LineAction.LoadLine:\n      return [action.payload, ...noteLinesArray]\n\n\n    case LineAction.AddNewLine:\n      //console.log(\"Old: \"+ JSON.stringify(noteLinesArray))\n      const oldList = noteLinesArray.map(line =>{\n\n        //console.log(\"a Line: \"+ JSON.stringify(line))\n\n        if(line.lineNumber <= action.payload){\n\n          return {lineContents:line.lineContents+\"\", lineNumber:line.lineNumber, marked:\"under\"}\n\n        }\n        else{\n\n          return{lineContents:line.lineContents+\"\", lineNumber:line.lineNumber+1, marked:\"Over\"}\n\n        }\n      })\n      const temp = {lineNumber:action.payload+1, lineContents:\"\", isEditing:true, marked:\"new\"}\n      //console.log(\"New: \"+ JSON.stringify([...oldList, temp].sort((a,b) => {return a.lineNumber - b.lineNumber})))\n      return [...oldList, temp].sort((a,b) => {return a.lineNumber - b.lineNumber});\n\n\n    case LineAction.RemoveLine:\n      const newList = noteLinesArray.filter(line => line.lineNumber != action.payload.lineNumber).map(line =>{\n\n        //console.log(\"a Line: \"+ JSON.stringify(line))\n\n        if(line.lineNumber <= action.payload.lineNumber ){\n\n          return {lineContents:line.lineContents+\"\", lineNumber:line.lineNumber, marked:\"under\"}\n\n        }\n        else{\n\n          return{lineContents:line.lineContents+\"\", lineNumber:line.lineNumber-1, marked:\"Over\"}\n\n        }\n      })\n      //console.log(\"New: \"+ JSON.stringify([...oldList, temp].sort((a,b) => {return a.lineNumber - b.lineNumber})))\n      return newList.sort((a,b) => {return a.lineNumber - b.lineNumber});\n\n\n    case UserAction.FinishLoadSheet:\n      return JSON.parse(action.payload.contents)//.sort((a,b) => {return a.lineNumber - b.lineNumber});\n\n    default:\n      return noteLinesArray;\n\n  }\n}\n\nfunction lineCountReducer(lineCountVar, action){\n  switch (action.type) {\n\n\n    case UserAction.FinishDelete:\n      return 0;\n\n\n    case LineAction.LoadLine:\n      return (lineCountVar+1);\n\n\n    case LineAction.AddNewLine:\n      return (lineCountVar+1);\n\n\n    case LineAction.RemoveLine:\n      return (lineCountVar-1)\n\n\n    case UserAction.FinishLoadSheet:\n      return action.payload.lineCount;\n\n\n    case UserAction.Logout:\n      return 0;\n\n\n    default:\n      return lineCountVar;\n  }\n}\n\nfunction userNameReducer(userNameVar, action){\n  switch (action.type){\n\n\n    case UserAction.FinishLogin:\n      return action.payload.userName;\n\n\n    case UserAction.Logout:\n      return \"\";\n\n    default:\n      return userNameVar;\n\n  }\n}\n\nfunction noteSheetsReducer(noteSheetsArray, action){\n  switch (action.type){\n\n\n    case UserAction.FinishNewNoteSheet:\n      return[...noteSheetsArray, action.payload]\n\n\n    case UserAction.FinishDelete:\n      return noteSheetsArray.filter(sheet => !sheet.isActive);\n\n\n    case UserAction.BeginNewNoteSheet:\n      return [...noteSheetsArray,{noteSheetName:\"new sheet\"}]\n\n\n    case UserAction.FinishLogin:\n      return action.payload.noteSheetList;\n\n\n    case UserAction.FinishLoadSheet:\n      return noteSheetsArray.map(sheet =>{\n        if(sheet.noteSheetName === action.payload.noteSheetName){\n          return{...sheet, isActive:true};\n        }\n        else{\n          return{...sheet, isActive:false};\n        }\n      });\n\n\n      case UserAction.Logout:\n        return [];\n\n    default:\n      return noteSheetsArray;\n  }\n}\n\nfunction noteSheet_idReducer(oldId, action){\n  switch (action.type){\n\n\n    case UserAction.FinishLoadSheet:\n      return action.payload.noteSheet_id;\n\n    default:\n      return oldId;\n  }\n}\n\nfunction lastUpdatedAtReduced(oldTime, action){\n  switch (action.type){\n\n\n    case UserAction.finishLoadSheet:\n      return (new Date(action.payload.updatedAt)).toUTCString();s;\n\n\n    default:\n      return oldTime;\n\n  }\n}\n\nfunction reducer(state = initialState, action){\n    return{\n      lineCount: lineCountReducer(state.lineCount, action),\n      noteLines: noteLinesReducer(state.noteLines, action),\n      userName: userNameReducer(state.userName, action),\n      noteSheets: noteSheetsReducer(state.noteSheets, action),\n      noteSheet_id: noteSheet_idReducer(state.noteSheet_id, action),\n      lastUpdatedAt: lastUpdatedAtReduced(state.lastUpdatedAt, action),\n    };\n}\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}