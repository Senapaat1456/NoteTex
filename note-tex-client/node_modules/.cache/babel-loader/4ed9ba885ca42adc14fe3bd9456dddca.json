{"ast":null,"code":"import _toConsumableArray from\"/home/andrew/School/Spring_2020/WebSystems/NoteTex/note-tex-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/andrew/School/Spring_2020/WebSystems/NoteTex/note-tex-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{LineAction}from'./LineActions';import{UserAction}from'./UserActions';var initialState={lineCount:0,noteLines:[],userName:\"\",noteSheets:[],noteSheet_id:0};function noteLinesReducer(noteLinesArray,action){switch(action.type){case UserAction.FinishDelete:return[];case LineAction.StartEdit:return noteLinesArray.map(function(line){if(line.lineNumber===action.payload){return _objectSpread(_objectSpread({},line),{},{isEditing:true});}else{return line;}});case LineAction.EndEdit:return noteLinesArray.map(function(line){if(line.lineNumber===action.payload.lineNumber){return action.payload;}else{return line;}});case UserAction.Logout:return[];case LineAction.LoadLine:return[action.payload].concat(_toConsumableArray(noteLinesArray));case LineAction.AddNewLine:var oldList=noteLinesArray.map(function(line){if(line.lineNumber<=action.payload){return{lineContents:line.lineContents+\"\",lineNumber:line.lineNumber,marked:\"under\"};}else{return{lineContents:line.lineContents+\"\",lineNumber:line.lineNumber+1,marked:\"Over\"};}});var temp={lineNumber:action.payload+1,lineContents:\"\",isEditing:true,marked:\"new\"};return[].concat(_toConsumableArray(oldList),[temp]).sort(function(a,b){return a.lineNumber-b.lineNumber;});case LineAction.RemoveLine:var newList=noteLinesArray.filter(function(line){return line.lineNumber!==action.payload.lineNumber;}).map(function(line){if(line.lineNumber<=action.payload.lineNumber){return{lineContents:line.lineContents+\"\",lineNumber:line.lineNumber,marked:\"under\"};}else{return{lineContents:line.lineContents+\"\",lineNumber:line.lineNumber-1,marked:\"Over\"};}});return newList.sort(function(a,b){return a.lineNumber-b.lineNumber;});case UserAction.FinishLoadSheet:return JSON.parse(action.payload.contents);default:return noteLinesArray;}}function lineCountReducer(lineCountVar,action){switch(action.type){case UserAction.FinishDelete:return 0;case LineAction.LoadLine:return lineCountVar+1;case LineAction.AddNewLine:return lineCountVar+1;case LineAction.RemoveLine:return lineCountVar-1;case UserAction.FinishLoadSheet:return action.payload.lineCount;case UserAction.Logout:return 0;default:return lineCountVar;}}function userNameReducer(userNameVar,action){switch(action.type){case UserAction.FinishLogin:return action.payload.userName;case UserAction.Logout:return\"\";default:return userNameVar;}}function noteSheetsReducer(noteSheetsArray,action){switch(action.type){case UserAction.FinishNewNoteSheet:return[].concat(_toConsumableArray(noteSheetsArray),[action.payload]);case UserAction.FinishDelete:return noteSheetsArray.filter(function(sheet){return!sheet.isActive;});case UserAction.BeginNewNoteSheet:return[].concat(_toConsumableArray(noteSheetsArray),[{noteSheetName:\"new sheet\"}]);case UserAction.FinishLogin:return action.payload.noteSheetList;case UserAction.FinishLoadSheet:return noteSheetsArray.map(function(sheet){if(sheet.noteSheetName===action.payload.noteSheetName){return _objectSpread(_objectSpread({},sheet),{},{isActive:true});}else{return _objectSpread(_objectSpread({},sheet),{},{isActive:false});}});case UserAction.Logout:return[];default:return noteSheetsArray;}}function noteSheet_idReducer(oldId,action){switch(action.type){case UserAction.FinishLoadSheet:return action.payload.noteSheet_id;default:return oldId;}}function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;return{lineCount:lineCountReducer(state.lineCount,action),noteLines:noteLinesReducer(state.noteLines,action),userName:userNameReducer(state.userName,action),noteSheets:noteSheetsReducer(state.noteSheets,action),noteSheet_id:noteSheet_idReducer(state.noteSheet_id,action)};}export default reducer;","map":{"version":3,"sources":["/home/andrew/School/Spring_2020/WebSystems/NoteTex/note-tex-client/src/LineReducer.js"],"names":["LineAction","UserAction","initialState","lineCount","noteLines","userName","noteSheets","noteSheet_id","noteLinesReducer","noteLinesArray","action","type","FinishDelete","StartEdit","map","line","lineNumber","payload","isEditing","EndEdit","Logout","LoadLine","AddNewLine","oldList","lineContents","marked","temp","sort","a","b","RemoveLine","newList","filter","FinishLoadSheet","JSON","parse","contents","lineCountReducer","lineCountVar","userNameReducer","userNameVar","FinishLogin","noteSheetsReducer","noteSheetsArray","FinishNewNoteSheet","sheet","isActive","BeginNewNoteSheet","noteSheetName","noteSheetList","noteSheet_idReducer","oldId","reducer","state"],"mappings":"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","sourcesContent":["import {LineAction} from './LineActions';\nimport {UserAction} from './UserActions'\nconst initialState = {\n  lineCount: 0,\n  noteLines: [],\n  userName:\"\",\n  noteSheets:[],\n  noteSheet_id:0,\n}\n\nfunction noteLinesReducer(noteLinesArray, action){\n  switch (action.type) {\n\n\n    case UserAction.FinishDelete:\n      return [];\n\n\n    case LineAction.StartEdit:\n      return noteLinesArray.map(line =>{\n        if(line.lineNumber === action.payload){\n          return{...line, isEditing:true};\n        }\n        else{\n          return line;\n        }\n      });\n\n\n    case LineAction.EndEdit:\n      return noteLinesArray.map(line =>{\n           if(line.lineNumber === action.payload.lineNumber){\n             return action.payload;\n           }\n           else{\n             return line;\n           }\n         });\n\n     case UserAction.Logout:\n      return [];\n\n\n\n    case LineAction.LoadLine:\n      return [action.payload, ...noteLinesArray]\n\n\n    case LineAction.AddNewLine:\n      const oldList = noteLinesArray.map(line =>{\n\n\n        if(line.lineNumber <= action.payload){\n\n          return {lineContents:line.lineContents+\"\", lineNumber:line.lineNumber, marked:\"under\"}\n\n        }\n        else{\n\n          return{lineContents:line.lineContents+\"\", lineNumber:line.lineNumber+1, marked:\"Over\"}\n\n        }\n      })\n      const temp = {lineNumber:action.payload+1, lineContents:\"\", isEditing:true, marked:\"new\"}\n      return [...oldList, temp].sort((a,b) => {return a.lineNumber - b.lineNumber});\n\n\n    case LineAction.RemoveLine:\n      const newList = noteLinesArray.filter(line => line.lineNumber !== action.payload.lineNumber).map(line =>{\n\n\n        if(line.lineNumber <= action.payload.lineNumber ){\n\n          return {lineContents:line.lineContents+\"\", lineNumber:line.lineNumber, marked:\"under\"}\n\n        }\n        else{\n\n          return{lineContents:line.lineContents+\"\", lineNumber:line.lineNumber-1, marked:\"Over\"}\n\n        }\n      })\n      return newList.sort((a,b) => {return a.lineNumber - b.lineNumber});\n\n\n    case UserAction.FinishLoadSheet:\n      return JSON.parse(action.payload.contents)\n    default:\n      return noteLinesArray;\n\n  }\n}\n\nfunction lineCountReducer(lineCountVar, action){\n  switch (action.type) {\n\n\n    case UserAction.FinishDelete:\n      return 0;\n\n\n    case LineAction.LoadLine:\n      return (lineCountVar+1);\n\n\n    case LineAction.AddNewLine:\n      return (lineCountVar+1);\n\n\n    case LineAction.RemoveLine:\n      return (lineCountVar-1)\n\n\n    case UserAction.FinishLoadSheet:\n      return action.payload.lineCount;\n\n\n    case UserAction.Logout:\n      return 0;\n\n\n    default:\n      return lineCountVar;\n  }\n}\n\nfunction userNameReducer(userNameVar, action){\n  switch (action.type){\n\n\n    case UserAction.FinishLogin:\n      return action.payload.userName;\n\n\n    case UserAction.Logout:\n      return \"\";\n\n    default:\n      return userNameVar;\n\n  }\n}\n\nfunction noteSheetsReducer(noteSheetsArray, action){\n  switch (action.type){\n\n\n    case UserAction.FinishNewNoteSheet:\n      return[...noteSheetsArray, action.payload]\n\n\n    case UserAction.FinishDelete:\n      return noteSheetsArray.filter(sheet => !sheet.isActive);\n\n\n    case UserAction.BeginNewNoteSheet:\n      return [...noteSheetsArray,{noteSheetName:\"new sheet\"}]\n\n\n    case UserAction.FinishLogin:\n      return action.payload.noteSheetList;\n\n\n    case UserAction.FinishLoadSheet:\n      return noteSheetsArray.map(sheet =>{\n        if(sheet.noteSheetName === action.payload.noteSheetName){\n          return{...sheet, isActive:true};\n        }\n        else{\n          return{...sheet, isActive:false};\n        }\n      });\n\n\n      case UserAction.Logout:\n        return [];\n\n    default:\n      return noteSheetsArray;\n  }\n}\n\nfunction noteSheet_idReducer(oldId, action){\n  switch (action.type){\n\n\n    case UserAction.FinishLoadSheet:\n      return action.payload.noteSheet_id;\n\n    default:\n      return oldId;\n  }\n}\n\nfunction reducer(state = initialState, action){\n    return{\n      lineCount: lineCountReducer(state.lineCount, action),\n      noteLines: noteLinesReducer(state.noteLines, action),\n      userName: userNameReducer(state.userName, action),\n      noteSheets: noteSheetsReducer(state.noteSheets, action),\n      noteSheet_id: noteSheet_idReducer(state.noteSheet_id, action),\n    };\n}\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}