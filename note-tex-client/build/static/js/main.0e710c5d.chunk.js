(this["webpackJsonpnote-tex-client"]=this["webpackJsonpnote-tex-client"]||[]).push([[0],{17:function(e,t,n){e.exports=n(37)},22:function(e,t,n){},23:function(e,t,n){},30:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(7),o=n.n(r),c=(n(22),n(23),n(1)),l=n(9),u=Object.freeze({BeginLogin:"BeginLogin",FinishLogin:"FinishLogin",Logout:"Logout",BeginNewUser:"BeginNewUser",BeginLoadSheet:"BeginLoadSheet",FinishLoadSheet:"FinishLoadSheet",FinishNewNoteSheet:"FinishNewNoteSheet",FinishDelete:"FinishDelete",StartWaiting:"StartWaiting",StopWaiting:"StopWaiting"}),s="https://websystems.senapatiratne.com:5443";function m(){return{type:u.StartWaiting}}function d(){return{type:u.StopWaiting}}function N(e){if(!e.ok)throw Error("".concat(e.status,":").concat(e.statusText));return e}function h(e,t){return function(n){n(m());var a={userName:t,sheetName:e},i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};fetch("".concat(s,"/noteSheetList"),i).then(N).then((function(e){return e.json()})).then((function(t){t.ok&&(n(function(e){return{type:u.FinishNewNoteSheet,payload:{noteSheetName:e}}}(e)),n(d()))})).catch((function(e){return console.error(e)}))}}function f(e,t){return function(n){n(m());var a={userName:e,noteSheet_id:t},i={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};fetch("".concat(s,"/noteSheet"),i).then(N).then((function(e){return e.json()})).then((function(e){e.ok&&(n(function(e){return{type:u.FinishDelete,payload:e}}(t)),n(d()))})).catch((function(e){return console.error(e)}))}}function p(e){return function(t){t(m()),fetch("".concat(s,"/noteSheetList/").concat(e)).then(N).then((function(e){return e.json()})).then((function(n){n.ok?t(function(e,t){return{type:u.FinishLogin,payload:{noteSheetList:e,userName:t}}}(n.usersNoteSheets,e)):alert("Login Failed. Try Again. Click 'New User' if making you are making a new acount."),t(d())})).catch((function(e){return console.error(e)}))}}function E(e,t){return function(n){n(m()),fetch("".concat(s,"/noteSheetFind/").concat(e,"/").concat(t.noteSheetName)).then(N).then((function(e){return e.json()})).then((function(e){e.ok&&(n(function(e){return{type:u.FinishLoadSheet,payload:e}}(e.requestedNoteSheet[0])),n(d()))})).catch((function(e){return console.error(e)}))}}var b=Object.freeze({StartEdit:"StartEdit",EndEdit:"EndEdit",LoadLine:"LoadLine",IncrementLineCount:"IncrementLineCount",AddNewLine:"AddNewLine",RemoveLine:"removeLine"});function y(e){return{type:b.StartEdit,payload:e}}function S(e,t,n,a,i){if(null==i||""===i)return function(t){t(g(e))};var r=t.map((function(t){return t.lineNumber===e.lineNumber?e:t})),o={contents:JSON.stringify(r),lineCount:n,noteSheet_id:a,userName:i},c={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)};return function(t){t(g(e)),fetch("".concat("https://websystems.senapatiratne.com:5443","/noteSheetEdit"),c).then(N)}}function g(e,t,n,a,i){return{type:b.EndEdit,payload:e}}function v(e){return{type:b.LoadLine,payload:e}}n(30);var L=n(2),C=n.n(L);function w(e){var t=e.noteLine,n=Object(c.b)(),r=Object(a.useState)(t.lineContents),o=Object(l.a)(r,2),u=o[0],s=o[1],m=e.lineCount,d=function(){n(y(t.lineNumber))},N=function(a){var i;n(S({lineNumber:t.lineNumber,lineContents:u},e.noteLines,m,e.noteSheet_id,e.userName)),""!==u&&"ENTER"===a&&n((i=t.lineNumber,{type:b.AddNewLine,payload:i}))},h=function(){m>1&&n(function(e){return{type:b.RemoveLine,payload:e}}(t)),t.lineNumber>1&&n(y(t.lineNumber-1))},f=function(e){13===e?N("ENTER"):38===e?1!==t.lineNumber&&(n(S({lineNumber:t.lineNumber,lineContents:u})),n(y(t.lineNumber-1))):40===e?t.lineNumber!==m&&(n(S({lineNumber:t.lineNumber,lineContents:u})),n(y(t.lineNumber+1))):8!==e||""!==u&&null!=u||h()};return t.isEditing?i.a.createElement("span",{className:"lineArea"},i.a.createElement("input",{className:"inputBox",value:u,onBlur:function(){return N("CURSER")},onKeyDown:function(e){return f(e.keyCode)},onChange:function(e){s(e.target.value)},ref:function(e){return e&&e.focus()}})):i.a.createElement("span",{className:"lineArea"},function(e){var t,n,a=e,r=[12,24,20,16],o=0;"#"===a[0]&&(o=1,a=a.substr(1));"#"===a[0]&&(o=2,a=a.substr(1));"#"===a[0]&&(o=3,a=a.substr(1));try{var c=function e(t,n){var a,r=t,o=[];for(;r.length>0&&r[0]!==n;)if(o.push(r[0]),r=r.substr(1),"$"!==n&&("%"===o[o.length-1]||"`"===o[o.length-1]||"$"===o[o.length-1])){var c,u=e(r,o[o.length-1]),s=Object(l.a)(u,2);c=s[0],r=s[1],o.pop(o.length-1),a=i.a.createElement("span",null,a,i.a.createElement("span",null,o),i.a.createElement("span",null,c)),o=[],r=r.substr(1)}if(a=i.a.createElement("span",null,a,i.a.createElement("span",null,o)),null==r||0===r.length)return[i.a.createElement("span",null,a),null];if("%"===n)return[i.a.createElement("b",null,a),r];if("`"===n)return[i.a.createElement("i",null,a),r];if("$"===n){var m=o.join("");return[i.a.createElement(C.a.Provider,null,i.a.createElement(C.a.Node,{inline:!0,formula:m})),r]}return["",""]}(a,null),u=Object(l.a)(c,1);t=u[0],n=i.a.createElement("span",{onClick:d,style:{fontSize:r[o]},className:"noteText"}," ",t," ")}catch(s){n=i.a.createElement("span",{onClick:d,style:{fontSize:r[o]},className:"noteText"}," ",a," ")}return n}(t.lineContents))}n(35);function j(e){var t=e.userName,n=e.noteSheet,a=Object(c.b)(),r=function(){a(E(t,n))};return n.isActive?i.a.createElement("div",{className:"noteSheetNameActive",onClick:r},n.noteSheetName):i.a.createElement("div",{className:"noteSheetName",onClick:r}," ",n.noteSheetName," ")}n(36);function O(e){var t=e.userName,n=e.currentNoteSheet_id,a=Object(c.c)((function(e){return e.noteSheets})),r=Object(c.b)(),o=function(){null==t||""===t?document.getElementsByClassName("userNameBox")[0].style.borderColor="red":r(p(t))},l="";return null==t||""===t?i.a.createElement("div",{className:"loginBox"},i.a.createElement("div",{className:"loginHeader"},"Login to Save and Load Note Sheets"),i.a.createElement("div",{className:"userNameHeader"},"Username"),i.a.createElement("input",{className:"userNameBox",onChange:function(e){return t=e.target.value},onKeyDown:function(e){13===e.keyCode&&o()}}),i.a.createElement("span",{className:"buttonRow"},i.a.createElement("button",{className:"loginButton",onClick:o},"Login"),i.a.createElement("button",{className:"newUserButton",onClick:function(){null==t||""===t?document.getElementsByClassName("userNameBox")[0].style.borderColor="red":r(function(e){var t={userName:e},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return function(t){t(m()),fetch("".concat(s,"/users"),n).then(N).then((function(e){return e.json()})).then((function(n){n.ok&&(t(p(e)),t(d()))})).catch((function(e){return console.error(e)}))}}(t))}},"New User"))):i.a.createElement("span",{className:"listBox"},i.a.createElement("div",{className:"noteListHeader"},i.a.createElement("div",null,t,"'s")," Saved Notes"),i.a.createElement("span",{className:"listContainer"},a.map((function(e){return i.a.createElement(j,{key:e.noteSheetName,noteSheet:e,userName:t})}))),i.a.createElement("button",{className:"deleteButton",onClick:function(){r(f(t,n))}}," Delete "),i.a.createElement("button",{className:"newSheetButton",onClick:function(){null==l||""===l?document.getElementsByClassName("newSheetInput")[0].style.borderColor="red":r(h(l,t))}}," New Sheet "),i.a.createElement("input",{className:"newSheetInput",onChange:function(e){return l=e.target.value}}),i.a.createElement("button",{onClick:function(){r({type:u.Logout,payload:null}),r(v({lineNumber:1,lineContents:""}))},className:"logoutButton"}," Logout "))}var x=function(){window.addEventListener("keydown",(function(e){if(("U+0008"===e.keyIdentifier||"Backspace"===e.keyIdentifier||8===e.keyCode)&&e.target===document.body)return e.preventDefault(),!1}),!0);var e=Object(c.c)((function(e){return e.noteLines})),t=Object(c.c)((function(e){return e.lineCount})),n=Object(c.c)((function(e){return e.userName})),r=Object(c.c)((function(e){return e.noteSheet_id})),o=Object(c.b)(),l=Object(c.c)((function(e){return e.isWaiting}));return Object(a.useEffect)((function(){o(v({lineNumber:1,lineContents:""})),o(y(1))}),[o]),i.a.createElement("div",{className:"App"},l&&i.a.createElement("div",{className:"waitingWheel"}," ",i.a.createElement("div",{className:"innerWheel"}," ",i.a.createElement("div",{className:"innerInnerWheel"})," ")),i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"title"}," Note-Tex ")),i.a.createElement("div",{className:"middle"},i.a.createElement("div",{className:"leftMargin"},i.a.createElement("div",{className:"mainTipBox"},i.a.createElement("div",{className:"tipTitle"},"Tips"),i.a.createElement("div",{className:"tipBox"},i.a.createElement("div",{className:"tipHeading"},"Bold"),"%text% -> ",i.a.createElement("b",null,"text")),i.a.createElement("div",{className:"tipBox"},i.a.createElement("div",{className:"tipHeading"},"Italic"),"'text' -> ",i.a.createElement("i",null,"text")),i.a.createElement("div",{className:"tipBox"},i.a.createElement("div",{className:"tipHeading"},"LaTex"),"$x^2$ -> ",i.a.createElement(C.a.Provider,null,i.a.createElement(C.a.Node,{inline:!0,formula:"x^2"}))),i.a.createElement("div",{className:"tipBox"},i.a.createElement("div",{className:"tipHeading"},"Headings"),i.a.createElement("div",null,"#text -> ",i.a.createElement("span",{style:{fontSize:24}},"text")),i.a.createElement("div",null,"##text -> ",i.a.createElement("span",{style:{fontSize:20}},"text")),i.a.createElement("div",null,"##text -> ",i.a.createElement("span",{style:{fontSize:16}},"text"))),i.a.createElement("div",{className:"tipBox"},i.a.createElement("div",{className:"tipHeading"},"Mix and Match"),"#$x^2$ -> ",i.a.createElement("span",{style:{fontSize:24}},i.a.createElement(C.a.Provider,null,i.a.createElement(C.a.Node,{inline:!0,formula:"x^2"})))))),i.a.createElement("div",{className:"body"},e.map((function(a){return i.a.createElement(w,{key:a.lineNumber+a.lineContents,lineCount:t,noteLine:a,userName:n,noteSheet_id:r,noteLines:e})}))),i.a.createElement("div",{className:"rightMargin"},i.a.createElement(O,{userName:n,currentNoteSheet_id:r}))))},k=n(4),B=n(16),F=n(6),T=n(3),A={lineCount:0,noteLines:[],userName:"",noteSheets:[],noteSheet_id:0,isWaiting:!1};function W(e,t){switch(t.type){case u.FinishDelete:return[];case b.StartEdit:return e.map((function(e){return e.lineNumber===t.payload?Object(T.a)(Object(T.a)({},e),{},{isEditing:!0}):e}));case b.EndEdit:return e.map((function(e){return e.lineNumber===t.payload.lineNumber?t.payload:e}));case u.Logout:return[];case b.LoadLine:return[t.payload].concat(Object(F.a)(e));case b.AddNewLine:var n=e.map((function(e){return e.lineNumber<=t.payload?{lineContents:e.lineContents+"",lineNumber:e.lineNumber,marked:"under"}:{lineContents:e.lineContents+"",lineNumber:e.lineNumber+1,marked:"Over"}})),a={lineNumber:t.payload+1,lineContents:"",isEditing:!0,marked:"new"};return[].concat(Object(F.a)(n),[a]).sort((function(e,t){return e.lineNumber-t.lineNumber}));case b.RemoveLine:return e.filter((function(e){return e.lineNumber!==t.payload.lineNumber})).map((function(e){return e.lineNumber<=t.payload.lineNumber?{lineContents:e.lineContents+"",lineNumber:e.lineNumber,marked:"under"}:{lineContents:e.lineContents+"",lineNumber:e.lineNumber-1,marked:"Over"}})).sort((function(e,t){return e.lineNumber-t.lineNumber}));case u.FinishLoadSheet:return JSON.parse(t.payload.contents);default:return e}}function D(e,t){switch(t.type){case u.FinishDelete:return 0;case b.LoadLine:case b.AddNewLine:return e+1;case b.RemoveLine:return e-1;case u.FinishLoadSheet:return t.payload.lineCount;case u.Logout:return 0;default:return e}}function _(e,t){switch(t.type){case u.FinishLogin:return t.payload.userName;case u.Logout:return"";default:return e}}function H(e,t){switch(t.type){case u.FinishNewNoteSheet:return[].concat(Object(F.a)(e),[t.payload]);case u.FinishDelete:return e.filter((function(e){return!e.isActive}));case u.BeginNewNoteSheet:return[].concat(Object(F.a)(e),[{noteSheetName:"new sheet"}]);case u.FinishLogin:return t.payload.noteSheetList;case u.FinishLoadSheet:return e.map((function(e){return e.noteSheetName===t.payload.noteSheetName?Object(T.a)(Object(T.a)({},e),{},{isActive:!0}):Object(T.a)(Object(T.a)({},e),{},{isActive:!1})}));case u.Logout:return[];default:return e}}function I(e,t){switch(t.type){case u.FinishLoadSheet:return t.payload.noteSheet_id;default:return e}}function R(e,t){switch(t.type){case u.StartWaiting:return!0;case u.StopWaiting:return!1;default:return e}}var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;return{isWaiting:R(e.isWaiting,t),lineCount:D(e.lineCount,t),noteLines:W(e.noteLines,t),userName:_(e.userName,t),noteSheets:H(e.noteSheets,t),noteSheet_id:I(e.noteSheet_id,t)}},J=Object(k.c)(z,Object(k.a)(B.a));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(c.a,{store:J},i.a.createElement(x,null))),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.0e710c5d.chunk.js.map